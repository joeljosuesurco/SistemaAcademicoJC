import{l as n,M as m,w as p,Q as b,o as u,a,d as f,c as w,x,J as d,Y as c,D as g,E as _,H as y}from"./index-CH035xVG.js";const k={class:"p-6"},C={class:"bg-white rounded-xl shadow p-6 max-w-xl"},N={class:"mb-4"},V={class:"mb-4"},A={key:0,class:"mt-4 text-sm text-red-600"},D={__name:"AdministrarGestionView",setup(B){const l=n(""),t=n(""),s=n(null),o=n(!1),v=async()=>{var r;if(!l.value||!t.value){s.value="Completa todos los campos.";return}o.value=!0,s.value=null;try{const e=await y.post("/gestiones/administrar/cambiar",{nueva_gestion:l.value,password:t.value});s.value="Nueva gestión creada correctamente.",l.value="",t.value=""}catch(e){((r=e.response)==null?void 0:r.status)===403?s.value="Contraseña incorrecta.":s.value="Ocurrió un error al cambiar la gestión."}finally{o.value=!1}};return(r,e)=>(u(),m(b,null,{default:p(()=>[a("div",k,[e[5]||(e[5]=a("h1",{class:"text-xl font-bold mb-4"},"Administrar Gestión Académica",-1)),a("div",C,[e[4]||(e[4]=a("p",{class:"mb-4 text-gray-700"}," Esta acción cerrará la gestión actual y activará una nueva. Se requiere contraseña de administrador. ",-1)),a("div",N,[e[2]||(e[2]=a("label",{class:"block font-medium mb-1"},"Nueva gestión (ej. 2026)",-1)),d(a("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=i=>l.value=i),placeholder:"Año de la nueva gestión",class:"w-full p-3 border rounded"},null,512),[[c,l.value]])]),a("div",V,[e[3]||(e[3]=a("label",{class:"block font-medium mb-1"},"Contraseña de administrador",-1)),d(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>t.value=i),placeholder:"********",class:"w-full p-3 border rounded"},null,512),[[c,t.value]])]),f(g,{label:o.value?"Procesando...":"Crear nueva gestión",disabled:o.value,color:"blue",onClick:v},null,8,["label","disabled"]),s.value?(u(),w("div",A,_(s.value),1)):x("",!0)])])]),_:1}))}};export{D as default};
