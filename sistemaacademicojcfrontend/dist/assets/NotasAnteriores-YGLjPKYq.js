import{l,O as x,p as B,M,w as T,Q as U,H as v,o,a,c as r,J as p,d as $,F as m,L as g,E as n,Z as _,D as C}from"./index-CH035xVG.js";const D={class:"p-6"},F={class:"bg-white rounded-xl shadow p-4 mb-6 flex flex-wrap gap-4 items-center"},G=["value"],H=["value"],L=["value"],O={key:0,class:"text-gray-500"},A={key:1},J={class:"min-w-full border border-gray-200 rounded shadow"},Q={class:"p-2"},Z={class:"p-2"},j={class:"p-2"},I={__name:"NotasAnteriores",setup(q){const f=l([]),b=l([]),c=l([]),y=l([]),i=l(""),u=l(""),d=l(""),w=l("Trimestre 1"),S=async()=>{try{const t=await v.get("/gestiones");f.value=t.data.data}catch(t){console.error("Error al cargar gestiones:",t)}},E=async()=>{if(i.value)try{const t=await v.get(`/cursos?gestion=${i.value}`);b.value=t.data.data}catch(t){console.error("Error al cargar cursos:",t)}},N=async()=>{if(u.value)try{const t=await v.get(`/cursos/${u.value}/estudiantes`);c.value=t.data.data}catch(t){console.error("Error al cargar estudiantes:",t)}};x(i,()=>{u.value="",d.value="",b.value=[],c.value=[],E()}),x(u,()=>{d.value="",c.value=[],N()});const V=async()=>{if(d.value)try{const t=await v.get("/historial/notas",{params:{gestion:i.value,periodo:w.value,estudiante_id:d.value}});y.value=t.data.data}catch(t){console.error("Error al buscar notas:",t)}};return B(()=>{S()}),(t,s)=>(o(),M(U,null,{default:T(()=>[a("div",D,[s[9]||(s[9]=a("h1",{class:"text-xl font-bold mb-4"},"Historial de Notas",-1)),a("div",F,[p(a("select",{class:"border rounded p-3 min-w-[12rem]","onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e)},[s[4]||(s[4]=a("option",{disabled:"",value:""},"Seleccione gestión",-1)),(o(!0),r(m,null,g(f.value,e=>(o(),r("option",{key:e.id_gestion,value:e.gestion}," Gestión "+n(e.gestion),9,G))),128))],512),[[_,i.value]]),p(a("select",{class:"border rounded p-3 min-w-[12rem]","onUpdate:modelValue":s[1]||(s[1]=e=>u.value=e)},[s[5]||(s[5]=a("option",{disabled:"",value:""},"Seleccione curso",-1)),(o(!0),r(m,null,g(b.value,e=>(o(),r("option",{key:e.id_curso,value:e.id_curso},n(e.grado_curso)+" "+n(e.paralelo_curso),9,H))),128))],512),[[_,u.value]]),p(a("select",{class:"border rounded p-3 min-w-[14rem]","onUpdate:modelValue":s[2]||(s[2]=e=>d.value=e)},[s[6]||(s[6]=a("option",{disabled:"",value:""},"Seleccione estudiante",-1)),(o(!0),r(m,null,g(c.value,e=>(o(),r("option",{key:e.id_estudiante,value:e.id_estudiante},n(e.nombre_completo),9,L))),128))],512),[[_,d.value]]),p(a("select",{class:"border rounded p-3 min-w-[10rem]","onUpdate:modelValue":s[3]||(s[3]=e=>w.value=e)},s[7]||(s[7]=[a("option",null,"Trimestre 1",-1),a("option",null,"Trimestre 2",-1),a("option",null,"Trimestre 3",-1)]),512),[[_,w.value]]),$(C,{label:"Buscar",onClick:V})]),y.value.length===0?(o(),r("div",O," No se encontraron notas para los filtros seleccionados. ")):(o(),r("div",A,[a("table",J,[s[8]||(s[8]=a("thead",{class:"bg-gray-100"},[a("tr",null,[a("th",{class:"p-2"},"Materia"),a("th",{class:"p-2"},"Nota Final"),a("th",{class:"p-2"},"Observación")])],-1)),a("tbody",null,[(o(!0),r(m,null,g(y.value,e=>{var k,h;return o(),r("tr",{key:e.id_nota},[a("td",Q,n((k=e.materia)==null?void 0:k.campo_materia)+" ("+n((h=e.materia)==null?void 0:h.sigla_materia)+")",1),a("td",Z,n(e.nota_final),1),a("td",j,n(e.observacion),1)])}),128))])])]))])]),_:1}))}};export{I as default};
