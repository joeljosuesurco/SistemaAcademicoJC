import{l as u,p as j,H as k,M as B,w as U,Q as $,o as m,a as s,c as V,d as v,e as i,E as r,J as C,Y as E,D as M,v as z,q as P}from"./index-mF53A-2o.js";const T={class:"p-6"},q={key:0,class:"text-gray-500"},G={key:1,class:"grid md:grid-cols-2 gap-6"},H={class:"border border-blue-300 p-6 rounded shadow-xl bg-white"},I={class:"list-disc ml-6 mt-2 text-gray-800"},J={class:"border border-yellow-300 p-6 rounded shadow-xl bg-white"},O={class:"space-y-4"},Q={class:"flex gap-2"},Y={__name:"PerfilUsuarioView",setup(R){const a=u(null),d=u(""),p=u(!1),f=u(!0),l=u({name_user:"",password:""});j(async()=>{try{const o=await k.get("/perfil-detallado");a.value=o.data.data,l.value={name_user:a.value.name_user,password:"**************"}}catch(o){console.error("Error cargando perfil:",o)}finally{f.value=!1}});async function N(){var o;try{const e={name_user:l.value.name_user};l.value.password!=="**************"&&(e.password=l.value.password);const t=await k.put("/perfil",e);a.value.name_user=t.data.data.name_user,d.value="Usuario actualizado correctamente."}catch(e){if(((o=e.response)==null?void 0:o.status)===422){const t=e.response.data.errors;d.value=Object.values(t).flat().join(", ")}else d.value="Error al actualizar el usuario.";console.error(e)}finally{p.value=!0}}function D(){a.value&&(l.value={name_user:a.value.name_user,password:"**************"})}return(o,e)=>(m(),B($,null,{default:U(()=>{var t,b,c,_,w,x,g,y;return[s("div",T,[e[12]||(e[12]=s("h2",{class:"text-xl font-bold mb-4"},"Mi Perfil",-1)),f.value?(m(),V("div",q,"Cargando datos...")):(m(),V("div",G,[s("div",H,[e[7]||(e[7]=s("h3",{class:"text-lg font-semibold text-blue-800 mb-4"},"Detalles del Usuario",-1)),s("p",null,[e[3]||(e[3]=s("strong",null,"Nombre de Usuario:",-1)),i(" "+r(a.value.name_user),1)]),s("p",null,[e[4]||(e[4]=s("strong",null,"Estado:",-1)),i(" "+r(a.value.state_user),1)]),s("p",null,[e[5]||(e[5]=s("strong",null,"Rol:",-1)),i(" "+r((b=(t=a.value.persona_rol)==null?void 0:t.rol)==null?void 0:b.nombre),1)]),e[8]||(e[8]=s("p",{class:"mt-4 text-blue-700 font-semibold"},"Datos personales:",-1)),s("ul",I,[s("li",null,[e[6]||(e[6]=s("strong",null,"Nombre completo:",-1)),i(" "+r((_=(c=a.value.persona_rol)==null?void 0:c.persona)==null?void 0:_.apellidos_pat)+" "+r((x=(w=a.value.persona_rol)==null?void 0:w.persona)==null?void 0:x.apellidos_mat)+" "+r((y=(g=a.value.persona_rol)==null?void 0:g.persona)==null?void 0:y.nombres_persona),1)])])]),s("div",J,[e[11]||(e[11]=s("h3",{class:"text-lg font-semibold text-yellow-800 mb-4"},"Editar Usuario",-1)),s("form",O,[s("div",null,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium mb-1"},"Nombre de Usuario",-1)),C(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>l.value.name_user=n),class:"w-full px-4 py-2 border rounded"},null,512),[[E,l.value.name_user]])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium mb-1"},"Contraseña",-1)),C(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>l.value.password=n),class:"w-full px-4 py-2 border rounded"},null,512),[[E,l.value.password]])]),s("div",Q,[v(M,{label:"Guardar cambios",color:"success",onClick:z(N,["prevent"])}),v(M,{label:"Cancelar",color:"secondary",onClick:D})])])])])),v(P,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=n=>p.value=n),title:"Información"},{default:U(()=>[s("p",null,r(d.value),1)]),_:1},8,["modelValue"])])]}),_:1}))}};export{Y as default};
