import{_ as p,$ as h,l as u,p as g,H as x,M as f,w as l,Q as y,o as a,d as m,S as v,c as o,x as w,T as C,F as b,L as k,t as V,n as $,a as d,E as t}from"./index-BPGklECu.js";const B={key:0,class:"grid gap-4"},N={class:"text-lg font-bold text-indigo-800 mb-1"},S={class:"text-gray-700 whitespace-pre-line"},E={class:"text-sm text-gray-500 mt-2"},F={key:1,class:"text-gray-500"},I={key:2,class:"text-red-600 mt-4"},M={__name:"ComunicadoRecienteView",setup(L){const s=h(),i=u([]),n=u("");return g(async()=>{try{s.userId||await s.fetchPerfil();const _=(await x.get(`/notificacion-usuario/${s.userId}/ultimos`)).data.data||[];i.value=_.map(e=>e.notificacion).filter(Boolean).sort((e,r)=>r.fecha_notificacion.localeCompare(e.fecha_notificacion)),s.marcarComunicadosComoVistos()}catch(c){console.error(c),n.value="No se pudo cargar los comunicados recientes."}}),(c,_)=>(a(),f(y,null,{default:l(()=>[m(v,null,{default:l(()=>[m(C,{title:"Ãšltimos Comunicados"}),i.value.length>0?(a(),o("div",B,[(a(!0),o(b,null,k(i.value,(e,r)=>(a(),f(V,{key:e.id_notificacion,class:$(["transition-shadow border border-indigo-300 p-4 rounded-lg shadow-md",{"animate-pulse border-2 border-indigo-500":r===0}])},{default:l(()=>[d("h2",N,t(e.titulo_notificacion),1),d("p",S,t(e.mensaje_notificacion),1),d("p",E," Fecha: "+t(e.fecha_notificacion)+" | Tipo: "+t(e.tipo_notificacion)+" | Estado: "+t(e.estado_notificacion),1)]),_:2},1032,["class"]))),128))])):(a(),o("div",F," No hay comunicados recientes disponibles para tu usuario. ")),n.value?(a(),o("div",I,t(n.value),1)):w("",!0)]),_:1})]),_:1}))}},T=p(M,[["__scopeId","data-v-590868c7"]]);export{T as default};
