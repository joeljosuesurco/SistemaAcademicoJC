import{a4 as V,a5 as A,a6 as L,a7 as P,a8 as N,a9 as F,aa as $,l as r,p as T,H as w,f as p,M as j,w as U,Q as H,o,a as t,c as i,J as h,Y as O,E as l,F as _,L as f,d as x,D as k,Z,u as z,ab as G,e as n}from"./index-B8rY39Xw.js";const J={class:"p-6 space-y-6"},Q={key:0},Y={class:"mb-4"},q={key:0,class:"text-gray-500"},I={key:1,class:"text-red-600"},K={key:2,class:"w-full text-left bg-white rounded shadow"},W={class:"p-2"},X={class:"p-2"},ee={class:"p-2"},te={key:1},ae={class:"flex justify-between items-center mb-4"},se={class:"text-xl font-bold"},le={class:"mb-4"},oe=["value"],ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ne={class:"p-4 bg-blue-50 border border-blue-200 rounded-xl shadow-md flex flex-col h-[360px] overflow-hidden"},re={class:"bg-white p-4 border rounded shadow"},de={class:"text-sm space-y-2 max-h-80 overflow-y-auto"},ue={class:"ml-4 list-disc mt-2"},ce={key:1,class:"text-gray-600 text-center"},ve={__name:"SeguimientoHijosPadreView",setup(pe){V.register(A,L,P,N,F,$);const m=r([]),d=r(null),g=r([]),u=r(""),y=r(!0),v=r(null),c=r("");T(async()=>{try{const a=await w.get("/padre-auth/hijos");m.value=a.data.data||[]}catch{v.value="No se pudo cargar la lista de hijos"}finally{y.value=!1}});function S(a){d.value=a,u.value="",C(a.id_estudiante)}async function C(a){try{const e=await w.get(`/padre-auth/seguimientos/${a}`);g.value=e.data.data||[]}catch(e){console.error("Error cargando seguimientos:",e)}}const E=p(()=>{const a=new Map;return g.value.forEach(e=>{e.materia&&a.set(e.materias_id_materia,e.materia)}),Array.from(a.values())}),b=p(()=>g.value.filter(a=>a.materias_id_materia===u.value)),B=["Asistencia","Participación","Disciplina","Puntualidad","Respeto","Tolerancia","Ánimo"],D=p(()=>{const a=b.value[0]||{};return{labels:B,datasets:[{label:"Desempeño",data:[a.asistencia==="Sí"?5:0,a.participacion==="Alta"?5:a.participacion==="Media"?3:1,a.disciplina==="Excelente"?5:a.disciplina==="Buena"?4:a.disciplina==="Regular"?3:1,a.puntualidad==="Excelente"?5:a.puntualidad==="Buena"?4:a.puntualidad==="Regular"?3:1,a.respeto==="Sí"?5:0,a.tolerancia==="Sí"?5:0,a.estado_animo==="Muy bien"?5:a.estado_animo==="Bien"?4:a.estado_animo==="Neutro"?3:a.estado_animo==="Estresado"?2:1],backgroundColor:"rgba(59,130,246,0.3)",borderColor:"rgba(59,130,246,0.8)",pointBackgroundColor:"rgba(37,99,235,0.8)",pointBorderColor:"#fff"}]}}),M={responsive:!1,maintainAspectRatio:!1,devicePixelRatio:1,plugins:{legend:{position:"top"}},scales:{r:{beginAtZero:!0,min:0,max:5,ticks:{stepSize:1}}}},R=p(()=>c.value?m.value.filter(a=>a.nombre_completo.toLowerCase().includes(c.value.toLowerCase())):m.value);return(a,e)=>(o(),j(H,null,{default:U(()=>[t("div",J,[e[17]||(e[17]=t("h2",{class:"text-xl font-bold"},"Seguimiento de mis hijos",-1)),d.value?(o(),i("div",te,[t("div",ae,[t("h2",se," Seguimiento de "+l(d.value.nombre_completo),1),x(k,{label:"Volver",color:"gray",small:"",onClick:e[1]||(e[1]=s=>d.value=null)})]),t("div",le,[e[5]||(e[5]=t("label",{class:"block font-semibold mb-1"},"Materia:",-1)),h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s),class:"px-4 py-2 border rounded w-full"},[e[4]||(e[4]=t("option",{disabled:"",value:""},"Seleccione una materia",-1)),(o(!0),i(_,null,f(E.value,s=>(o(),i("option",{key:s.id_materia,value:s.id_materia},l(s.area_materia),9,oe))),128))],512),[[Z,u.value]])]),b.value.length?(o(),i("div",ie,[t("div",ne,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-blue-700 mb-4 text-center"}," Gráfico de Seguimiento ",-1)),x(z(G),{data:D.value,options:M,width:"300",height:"300"},null,8,["data"])]),t("div",re,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold mb-2"},"Detalle de Seguimientos",-1)),t("ul",de,[(o(!0),i(_,null,f(b.value,s=>(o(),i("li",{key:s.id_seguimiento,class:"border-b pb-2"},[t("p",null,[e[7]||(e[7]=t("strong",null,"Fecha:",-1)),n(" "+l(s.fecha_reg_seg),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Observación:",-1)),n(" "+l(s.observaciones_seguimiento),1)]),t("ul",ue,[t("li",null,[e[9]||(e[9]=t("strong",null,"Asistencia:",-1)),n(" "+l(s.asistencia),1)]),t("li",null,[e[10]||(e[10]=t("strong",null,"Participación:",-1)),n(" "+l(s.participacion),1)]),t("li",null,[e[11]||(e[11]=t("strong",null,"Disciplina:",-1)),n(" "+l(s.disciplina),1)]),t("li",null,[e[12]||(e[12]=t("strong",null,"Puntualidad:",-1)),n(" "+l(s.puntualidad),1)]),t("li",null,[e[13]||(e[13]=t("strong",null,"Respeto:",-1)),n(" "+l(s.respeto),1)]),t("li",null,[e[14]||(e[14]=t("strong",null,"Tolerancia:",-1)),n(" "+l(s.tolerancia),1)]),t("li",null,[e[15]||(e[15]=t("strong",null,"Estado Ánimo:",-1)),n(" "+l(s.estado_animo),1)])])]))),128))])])])):(o(),i("div",ce," No hay registros de seguimiento disponibles. "))])):(o(),i("div",Q,[t("div",Y,[h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),type:"text",placeholder:"Buscar por nombre...",class:"w-full md:w-1/2 px-4 py-2 border rounded shadow-sm"},null,512),[[O,c.value]])]),y.value?(o(),i("div",q,"Cargando hijos...")):v.value?(o(),i("div",I,l(v.value),1)):(o(),i("table",K,[e[3]||(e[3]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"p-2"},"Estudiante"),t("th",{class:"p-2"},"Curso"),t("th",{class:"p-2"},"Acciones")])],-1)),t("tbody",null,[(o(!0),i(_,null,f(R.value,s=>(o(),i("tr",{key:s.id_estudiante},[t("td",W,l(s.nombre_completo),1),t("td",X,l(s.curso.grado_curso)+" "+l(s.curso.paralelo_curso),1),t("td",ee,[x(k,{label:"Ver Seguimiento",color:"info",small:"",onClick:me=>S(s)},null,8,["onClick"])])]))),128))])]))]))])]),_:1}))}};export{ve as default};
