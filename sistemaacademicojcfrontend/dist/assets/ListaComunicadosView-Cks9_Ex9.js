import{l as s,O as L,p as V,H as T,f as w,M as B,w as D,Q as F,o as n,a as t,c,x as y,J as M,Y as N,E as a,F as $,L as E,d as _,D as g,e as f,a3 as S}from"./index-CH035xVG.js";const j={class:"p-6"},z={class:"mb-4 flex flex-col md:flex-row md:items-center md:gap-4"},P={key:0,class:"text-gray-500"},A={key:1,class:"text-red-600"},R={key:2,class:"w-full text-left bg-white rounded shadow"},H={class:"p-2"},I={class:"p-2"},J={class:"p-2 capitalize"},O={class:"p-2 capitalize"},Q={class:"p-2 space-x-2"},U={key:3,class:"mt-4 flex justify-center items-center gap-2"},x=10,K={__name:"ListaComunicadosView",setup(Y){const r=s([]),b=s(!0),v=s(null),i=s(""),u=s(null),p=s(!1),h=s(null),d=s(1);L(i,()=>{p.value=!1,u.value=null}),V(async()=>{try{const o=await T.get("/notificaciones");r.value=o.data.data.sort((e,l)=>l.fecha_notificacion.localeCompare(e.fecha_notificacion))}catch(o){v.value="No se pudo cargar la lista de comunicados",console.error(o)}finally{b.value=!1}});const k=w(()=>{const o=i.value?r.value.filter(l=>l.titulo_notificacion.toLowerCase().includes(i.value.toLowerCase())):r.value,e=(d.value-1)*x;return o.slice(e,e+x)}),m=w(()=>{const o=i.value?r.value.filter(e=>e.titulo_notificacion.toLowerCase().includes(i.value.toLowerCase())).length:r.value.length;return Math.ceil(o/x)});function C(o){u.value={...o},p.value=!0,S(()=>{var e;(e=h.value)==null||e.scrollIntoView({behavior:"smooth",block:"start"})})}return(o,e)=>(n(),B(F,null,{default:D(()=>[t("div",j,[e[10]||(e[10]=t("h2",{class:"text-xl font-bold mb-4"},"Listado de Comunicados",-1)),t("div",z,[M(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),type:"text",placeholder:"Buscar por título...",class:"w-full md:w-1/3 px-4 py-2 border rounded shadow-sm"},null,512),[[N,i.value]])]),b.value?(n(),c("div",P,"Cargando comunicados...")):v.value?(n(),c("div",A,a(v.value),1)):(n(),c("table",R,[e[3]||(e[3]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"p-2"},"Título"),t("th",{class:"p-2"},"Fecha"),t("th",{class:"p-2"},"Tipo"),t("th",{class:"p-2"},"Estado"),t("th",{class:"p-2"},"Acciones")])],-1)),t("tbody",null,[(n(!0),c($,null,E(k.value,l=>(n(),c("tr",{key:l.id_notificacion},[t("td",H,a(l.titulo_notificacion),1),t("td",I,a(l.fecha_notificacion),1),t("td",J,a(l.tipo_notificacion),1),t("td",O,a(l.estado_notificacion),1),t("td",Q,[_(g,{color:"info",label:"Ver",small:"",onClick:q=>C(l)},null,8,["onClick"])])]))),128))])])),m.value>1?(n(),c("div",U,[_(g,{label:"« Anterior",disabled:d.value===1,onClick:e[1]||(e[1]=l=>d.value--),small:""},null,8,["disabled"]),t("span",null,"Página "+a(d.value)+" de "+a(m.value),1),_(g,{label:"Siguiente »",disabled:d.value===m.value,onClick:e[2]||(e[2]=l=>d.value++),small:""},null,8,["disabled"])])):y("",!0),p.value?(n(),c("div",{key:4,ref_key:"detalleRef",ref:h,class:"mt-6 border border-indigo-300 p-6 rounded shadow-xl bg-white"},[e[9]||(e[9]=t("h3",{class:"text-xl font-semibold mb-4 text-indigo-800"},"Detalle del Comunicado",-1)),t("p",null,[e[4]||(e[4]=t("strong",null,"Título:",-1)),f(" "+a(u.value.titulo_notificacion),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Mensaje:",-1)),f(" "+a(u.value.mensaje_notificacion),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Fecha:",-1)),f(" "+a(u.value.fecha_notificacion),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Tipo:",-1)),f(" "+a(u.value.tipo_notificacion),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Estado:",-1)),f(" "+a(u.value.estado_notificacion),1)])],512)):y("",!0)])]),_:1}))}};export{K as default};
