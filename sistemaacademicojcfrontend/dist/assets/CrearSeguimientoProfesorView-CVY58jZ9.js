import{a4 as F,a5 as O,a6 as I,a7 as T,a8 as j,a9 as q,aa as G,l as r,p as Z,f as z,M as H,w as b,Q as J,H as N,o,a,c as i,F as g,L as _,E as n,d,D as c,J as f,Y as C,x as Q,Z as Y,u as K,ab as W,q as V,e as X}from"./index-BPGklECu.js";const ee={class:"p-6 space-y-6"},ae={key:0},te={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-4"},se=["onClick"],le={class:"font-semibold"},oe={class:"text-sm text-gray-600"},ie={class:"text-sm text-gray-600"},ne={key:1},re={class:"flex flex-col md:flex-row md:items-center md:gap-4 mb-4"},de={class:"w-full text-left bg-white rounded shadow text-sm"},ue={class:"p-2"},ce={class:"p-2"},me={key:0},pe={key:2},ve={class:"text-xl font-bold mb-2"},be={class:"mb-4"},ge=["value"],_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"p-4 bg-gray-50 border border-gray-200 rounded-xl shadow-md"},xe={class:"w-36 text-right font-medium text-gray-600"},ye=["onUpdate:modelValue"],he={class:"w-8 text-center font-semibold text-gray-800"},we={class:"w-28 text-left text-gray-700 text-sm"},ke={class:"p-4 bg-blue-50 border border-blue-200 rounded-xl shadow-md flex flex-col h-[360px] overflow-hidden"},Ce={class:"mt-6"},Ve={class:"mt-6 flex gap-4"},Ne={__name:"CrearSeguimientoProfesorView",setup(Ee){F.register(O,I,T,j,q,G);const E=r([]),m=r(null),u=r(null),x=r([]),S=r(""),p=r(!1),y=r(!1),h=r(!1),t=r({materias_id_materia:"",cursos_id_curso:null,gestiones_id_gestion:null,asistencia:0,participacion:0,disciplina:0,puntualidad:0,respeto:0,tolerancia:0,estado_animo:0,observaciones:""}),v=[{name:"asistencia",label:"Asistencia"},{name:"participacion",label:"Participación"},{name:"disciplina",label:"Disciplina"},{name:"puntualidad",label:"Puntualidad"},{name:"respeto",label:"Respeto"},{name:"tolerancia",label:"Tolerancia"},{name:"estado_animo",label:"Estado Ánimo"}];function M(l){const e=t.value[l];switch(l){case"asistencia":return e>=3?"Asistió":"No asistió";case"participacion":return e>=4?"Alta":e>=2?"Media":"Baja";case"disciplina":return e===5?"Excelente":e===4?"Buena":e===3?"Regular":"Mala";case"puntualidad":return e===5?"Excelente":e===4?"Buena":e===3?"Regular":"Mala";case"respeto":return e>=3?"Sí":"No";case"tolerancia":return e>=3?"Sí":"No";case"estado_animo":return e===5?"Muy bien":e===4?"Bien":e===3?"Neutro":e===2?"Estresado":"Malo";default:return""}}async function B(){const l=await N.get("/profesor-auth/cursos-seguimiento");E.value=l.data.data||[]}Z(B);function R(l){m.value=l,x.value=l.estudiantes||[],t.value.cursos_id_curso=l.id_curso,t.value.gestiones_id_gestion=l.id_gestion}function A(l){u.value=l,t.value.materias_id_materia="",v.forEach(e=>t.value[e.name]=0),t.value.observaciones=""}function w(){u.value=null}function U(){if(!t.value.materias_id_materia){h.value=!0;return}p.value=!0}async function D(){p.value=!1;const l={estudiantes_id_estudiante:u.value.id_estudiante,materias_id_materia:t.value.materias_id_materia,cursos_id_curso:t.value.cursos_id_curso,gestiones_id_gestion:t.value.gestiones_id_gestion,fecha_reg_seg:new Date().toISOString().slice(0,10),asistencia:t.value.asistencia>=3?"Sí":"No",participacion:t.value.participacion>=4?"Alta":t.value.participacion>=2?"Media":"Baja",disciplina:t.value.disciplina===5?"Excelente":t.value.disciplina===4?"Buena":t.value.disciplina===3?"Regular":"Mala",puntualidad:t.value.puntualidad===5?"Excelente":t.value.puntualidad===4?"Buena":t.value.puntualidad===3?"Regular":"Mala",respeto:t.value.respeto>=3?"Sí":"No",tolerancia:t.value.tolerancia>=3?"Sí":"No",estado_animo:t.value.estado_animo===5?"Muy bien":t.value.estado_animo===4?"Bien":t.value.estado_animo===3?"Neutro":t.value.estado_animo===2?"Estresado":"Malo",observaciones:t.value.observaciones.trim()===""?"NINGUNO":t.value.observaciones};try{await N.post("/profesor-auth/seguimientos",l),y.value=!0,w()}catch(e){alert("Error al registrar seguimiento"),console.error(e)}}const P=v.map(l=>l.label),$=z(()=>{var l;return{labels:P,datasets:[{label:((l=u.value)==null?void 0:l.nombre_completo)||"",data:v.map(e=>t.value[e.name]),backgroundColor:"rgba(59,130,246,0.3)",borderColor:"rgba(59,130,246,0.8)",pointBackgroundColor:"rgba(37,99,235,0.8)",pointBorderColor:"#fff"}]}}),L={responsive:!1,maintainAspectRatio:!1,devicePixelRatio:1,plugins:{legend:{position:"top"}},scales:{r:{beginAtZero:!0,min:0,max:5,ticks:{stepSize:1}}}};return(l,e)=>(o(),H(J,null,{default:b(()=>[a("div",ee,[m.value?u.value?(o(),i("div",pe,[a("h2",ve," Registrar Seguimiento de "+n(u.value.nombre_completo),1),d(c,{label:"Volver a estudiantes",color:"gray",small:"",class:"mb-4",onClick:w}),a("div",be,[e[12]||(e[12]=a("label",{class:"block mb-1 font-medium"},"Materia",-1)),f(a("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.materias_id_materia=s),class:"w-full px-4 py-2 border rounded"},[e[11]||(e[11]=a("option",{disabled:"",value:""},"Selecciona una materia",-1)),(o(!0),i(g,null,_(m.value.materias,s=>(o(),i("option",{key:s.id_materia,value:s.id_materia},n(s.area)+" ("+n(s.sigla)+") ",9,ge))),128))],512),[[Y,t.value.materias_id_materia]])]),a("div",_e,[a("div",fe,[e[13]||(e[13]=a("h3",{class:"text-lg font-semibold mb-4 text-gray-700"},"Valoraciones (0-5)",-1)),(o(),i(g,null,_(v,s=>a("div",{key:s.name,class:"flex items-center gap-4 mb-4"},[a("label",xe,n(s.label),1),f(a("input",{type:"range",min:"0",max:"5","onUpdate:modelValue":k=>t.value[s.name]=k,class:"flex-1 h-2"},null,8,ye),[[C,t.value[s.name],void 0,{number:!0}]]),a("div",he,n(t.value[s.name]),1),a("div",we,n(M(s.name)),1)])),64))]),a("div",ke,[e[14]||(e[14]=a("h3",{class:"text-lg font-semibold text-blue-700 mb-4 text-center"},"Vista Previa",-1)),d(K(W),{data:$.value,options:L,width:"300",height:"300"},null,8,["data"])])]),a("div",Ce,[e[15]||(e[15]=a("label",{class:"block mb-1 font-medium"},"Observaciones",-1)),f(a("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.observaciones=s),rows:"4",class:"w-full px-4 py-2 border rounded",placeholder:"Ingrese observaciones obligatorias..."},null,512),[[C,t.value.observaciones]])]),a("div",Ve,[d(c,{color:"primary",label:"Registrar Seguimiento",onClick:U}),d(c,{color:"secondary",label:"Cancelar",onClick:w})]),d(V,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=s=>p.value=s),title:"Confirmar registro",button:"success","button-label":"Confirmar","has-cancel":!0,onConfirm:D},{default:b(()=>e[16]||(e[16]=[X(" ¿Desea registrar este seguimiento? ")])),_:1},8,["modelValue"]),d(V,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=s=>h.value=s),title:"Validación Requerida",button:"danger","button-label":"Entendido"},{default:b(()=>e[17]||(e[17]=[a("p",null,"Debe escoger una materia antes de registrar el seguimiento.",-1)])),_:1},8,["modelValue"]),d(V,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=s=>y.value=s),title:"Registro Exitoso",button:"success","button-label":"Aceptar"},{default:b(()=>e[18]||(e[18]=[a("p",null,"Registro de seguimiento diario exitoso.",-1)])),_:1},8,["modelValue"])])):(o(),i("div",ne,[e[10]||(e[10]=a("h2",{class:"text-xl font-bold mb-4"},"Seleccionar Estudiante",-1)),d(c,{label:"Volver a cursos",color:"gray",small:"",class:"mb-4",onClick:e[0]||(e[0]=s=>m.value=null)}),a("div",re,[f(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>S.value=s),type:"text",placeholder:"Buscar por nombre...",class:"w-full md:w-1/3 px-4 py-2 border rounded shadow-sm"},null,512),[[C,S.value]])]),a("table",de,[e[9]||(e[9]=a("thead",{class:"bg-gray-100"},[a("tr",null,[a("th",{class:"p-2"},"Nombre completo"),a("th",{class:"p-2"},"Acciones")])],-1)),a("tbody",null,[(o(!0),i(g,null,_(x.value,s=>(o(),i("tr",{key:s.id_estudiante,class:"even:bg-gray-50"},[a("td",ue,n(s.nombre_completo),1),a("td",ce,[d(c,{color:"info",label:"Seleccionar",small:"",onClick:k=>A(s)},null,8,["onClick"])])]))),128)),x.value.length?Q("",!0):(o(),i("tr",me,e[8]||(e[8]=[a("td",{colspan:"2",class:"p-4 text-center text-gray-500"}," No hay estudiantes para mostrar. ",-1)])))])])])):(o(),i("div",ae,[e[7]||(e[7]=a("h2",{class:"text-xl font-bold mb-4"},"Seleccionar Curso",-1)),a("div",te,[(o(!0),i(g,null,_(E.value,s=>(o(),i("div",{key:s.id_curso+"-"+s.id_gestion,class:"p-4 border rounded shadow hover:bg-slate-100 cursor-pointer",onClick:k=>R(s)},[a("p",le,n(s.curso_nombre),1),a("p",oe,"Nivel: "+n(s.nivel),1),a("p",ie,"Gestión: "+n(s.gestion),1)],8,se))),128))])]))])]),_:1}))}};export{Ne as default};
