import{l as c,p as f,M as x,w as y,Q as k,H as w,o as n,a as s,c as p,J as r,d as _,Y as i,D as m,F as V,L as D,E as l}from"./index-DqMIVmN9.js";const U={class:"p-6"},L={class:"flex gap-4 flex-wrap mb-4"},M={key:0,class:"text-gray-500"},B={key:1},S={class:"min-w-full border border-gray-300 mb-4 text-sm"},A={class:"p-2"},C={class:"p-2"},F={class:"p-2"},N={class:"p-2"},$={class:"p-2"},E={class:"p-2"},I={class:"p-2"},P={class:"p-2"},H={class:"flex items-center gap-2"},T={__name:"LogsView",setup(J){const v=c([]),d=c(1),b=c(!1),t=c({usuario_id:"",modulo:"",accion:"",desde:"",hasta:""}),u=async()=>{try{const o={page:d.value,...t.value},e=await w.get("/logs",{params:o});v.value=e.data.data.data,b.value=!!e.data.data.next_page_url}catch(o){console.error("Error al cargar logs:",o)}},h=o=>new Date(o).toLocaleString();return f(()=>{u()}),(o,e)=>(n(),x(k,null,{default:y(()=>[s("div",U,[e[8]||(e[8]=s("h1",{class:"text-xl font-bold mb-4"},"Logs del Sistema",-1)),s("div",L,[r(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.usuario_id=a),type:"text",placeholder:"ID Usuario",class:"border p-2 rounded"},null,512),[[i,t.value.usuario_id]]),r(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.modulo=a),type:"text",placeholder:"Módulo",class:"border p-2 rounded"},null,512),[[i,t.value.modulo]]),r(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.accion=a),type:"text",placeholder:"Acción",class:"border p-2 rounded"},null,512),[[i,t.value.accion]]),r(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.desde=a),type:"date",class:"border p-2 rounded"},null,512),[[i,t.value.desde]]),r(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.hasta=a),type:"date",class:"border p-2 rounded"},null,512),[[i,t.value.hasta]]),_(m,{label:"Buscar",onClick:u})]),v.value.length===0?(n(),p("div",M," No se encontraron logs con los filtros seleccionados. ")):(n(),p("div",B,[s("table",S,[e[7]||(e[7]=s("thead",{class:"bg-gray-100"},[s("tr",null,[s("th",{class:"p-2"},"ID"),s("th",{class:"p-2"},"Usuario"),s("th",{class:"p-2"},"Módulo"),s("th",{class:"p-2"},"Acción"),s("th",{class:"p-2"},"Descripción"),s("th",{class:"p-2"},"IP"),s("th",{class:"p-2"},"Navegador"),s("th",{class:"p-2"},"Fecha")])],-1)),s("tbody",null,[(n(!0),p(V,null,D(v.value,a=>{var g;return n(),p("tr",{key:a.id},[s("td",A,l(a.id),1),s("td",C,l(((g=a.usuario)==null?void 0:g.name_user)||"Sin nombre"),1),s("td",F,l(a.modulo),1),s("td",N,l(a.accion),1),s("td",$,l(a.descripcion),1),s("td",E,l(a.ip),1),s("td",I,l(a.navegador),1),s("td",P,l(h(a.created_at)),1)])}),128))])]),s("div",H,[_(m,{label:"Anterior",disabled:d.value<=1,onClick:e[5]||(e[5]=a=>(d.value--,u()))},null,8,["disabled"]),s("span",null,"Página "+l(d.value),1),_(m,{label:"Siguiente",disabled:!b.value,onClick:e[6]||(e[6]=a=>(d.value++,u()))},null,8,["disabled"])])]))])]),_:1}))}};export{T as default};
