import{l as u,p as T,H as M,f as C,M as Y,w as J,Q as U,o as n,a as e,c as i,x as b,J as z,Y as I,E as l,F as _,L as x,d as f,D as y,e as r,n as D}from"./index-B8rY39Xw.js";const O={class:"p-6"},Q={class:"mb-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},R={key:0,class:"text-gray-500"},G={key:1,class:"text-red-600"},K={key:2,class:"w-full text-left bg-white rounded shadow"},W={class:"p-2"},X={class:"p-2"},Z={class:"p-2"},q={class:"p-2 space-x-2"},ee={key:3,class:"mt-8 grid md:grid-cols-2 gap-6 text-base"},te={class:"border border-blue-300 p-6 rounded shadow-xl bg-white"},le={class:"flex justify-between items-center mb-4"},se={class:"flex gap-6 items-start"},oe=["src"],ae={class:"space-y-1"},re={class:"border border-green-300 p-6 rounded shadow-xl bg-white"},ne={class:"list-disc list-inside text-sm space-y-2"},ie={class:"text-gray-800"},ue={class:"text-gray-800"},de={class:"text-gray-800"},ce={key:4,class:"mt-10"},ve={class:"bg-white border rounded shadow p-6"},pe={class:"flex justify-between items-center mb-4"},me={class:"text-xl font-semibold"},ge={class:"overflow-x-auto"},be={class:"min-w-full bg-white border rounded"},_e={class:"bg-blue-100"},xe={class:"px-4 py-2 border bg-blue-50"},fe={key:0,class:"inline-block bg-blue-200 text-blue-900 px-2 py-1 rounded text-xs leading-tight"},he={__name:"HijosPadreView",setup(ye){const w=u([]),v=u([]),h=u(null),p=u(!1),g=u(!1),a=u(null),m=u(""),N=u(!0),k=u(null),$=["Lunes","Martes","Miércoles","Jueves","Viernes"];T(async()=>{try{const s=await M.get("/padre-auth/hijos");w.value=s.data.data||[]}catch(s){k.value="No se pudo cargar la lista de hijos",console.error(s)}finally{N.value=!1}});const V=C(()=>m.value?w.value.filter(s=>{var t,o;return s.nombre_completo.toLowerCase().includes(m.value.toLowerCase())||`${(t=s.curso)==null?void 0:t.grado_curso} ${(o=s.curso)==null?void 0:o.paralelo_curso}`.toLowerCase().includes(m.value.toLowerCase())}):w.value),E=async s=>{g.value=!1,h.value=s,p.value=!1,v.value=[];try{const t=await M.get(`/padre-auth/horario/${s.id_estudiante}`);v.value=t.data.data||[],p.value=!0}catch(t){console.error("Error al cargar horario:",t)}},L=()=>{p.value=!1,h.value=null},F=s=>{p.value=!1,g.value=!0,a.value={...s}},j=()=>{g.value=!1,a.value=null},B=s=>{if(!s)return"—";const t=new Date,o=new Date(s);let c=t.getFullYear()-o.getFullYear();const d=t.getMonth()-o.getMonth();return(d<0||d===0&&t.getDate()<o.getDate())&&c--,`${c} años`},P=C(()=>{var t;const s=(t=a.value)==null?void 0:t.curso;return s?`${s.grado_curso} ${s.paralelo_curso} - ${s.nivel}`:"—"}),A=C(()=>v.value.length?v.value.map(s=>({dia:s.dia,hora_inicio:s.hora_inicio,hora_fin:s.hora_fin,materia:s.materia})):[]);return(s,t)=>(n(),Y(U,null,{default:J(()=>[e("div",O,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold mb-4"},"Mis Hijos",-1)),e("div",Q,[z(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),placeholder:"Buscar por nombre o curso...",class:"w-full md:w-1/3 px-4 py-2 border rounded shadow-sm"},null,512),[[I,m.value]])]),N.value?(n(),i("div",R,"Cargando hijos...")):k.value?(n(),i("div",G,l(k.value),1)):(n(),i("table",K,[t[1]||(t[1]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-2"},"Nombre completo"),e("th",{class:"p-2"},"Curso"),e("th",{class:"p-2"},"Nivel"),e("th",{class:"p-2"},"Acciones")])],-1)),e("tbody",null,[(n(!0),i(_,null,x(V.value,o=>{var c,d,H;return n(),i("tr",{key:o.id_estudiante},[e("td",W,l(o.nombre_completo),1),e("td",X,l((c=o.curso)==null?void 0:c.grado_curso)+" "+l((d=o.curso)==null?void 0:d.paralelo_curso),1),e("td",Z,l((H=o.curso)==null?void 0:H.nivel),1),e("td",q,[f(y,{color:"info",label:"Ver",onClick:S=>F(o)},null,8,["onClick"]),f(y,{color:"primary",label:"Ver Horario",onClick:S=>E(o)},null,8,["onClick"])])])}),128))])])),g.value&&a.value?(n(),i("div",ee,[e("div",te,[e("div",le,[t[2]||(t[2]=e("h3",{class:"text-xl font-semibold text-blue-800"},"Detalles del Estudiante",-1)),f(y,{label:"Cerrar",color:"warning",onClick:j})]),e("div",se,[a.value.foto?(n(),i("img",{key:0,src:`/storage/fotos/${a.value.foto}`,alt:"Foto del estudiante",class:"w-32 h-32 rounded-full object-cover border shadow"},null,8,oe)):b("",!0),e("div",ae,[e("p",null,[t[3]||(t[3]=e("strong",null,"RUDE:",-1)),r(" "+l(a.value.rude||"—"),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Apellido Paterno:",-1)),r(" "+l(a.value.apellidos_pat),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Apellido Materno:",-1)),r(" "+l(a.value.apellidos_mat),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Nombres:",-1)),r(" "+l(a.value.nombres),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"Fecha de Nacimiento:",-1)),r(" "+l(a.value.fecha_nacimiento),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"Edad:",-1)),r(" "+l(B(a.value.fecha_nacimiento)),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"Sexo:",-1)),r(" "+l(a.value.sexo),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"Nacionalidad:",-1)),r(" "+l(a.value.nacionalidad),1)]),e("p",null,[t[11]||(t[11]=e("strong",null,"Curso:",-1)),r(" "+l(P.value),1)]),e("p",null,[t[12]||(t[12]=e("strong",null,"Celular:",-1)),r(" "+l(a.value.celular),1)]),e("p",null,[t[13]||(t[13]=e("strong",null,"Dirección:",-1)),r(" "+l(a.value.direccion),1)])])])]),e("div",re,[t[17]||(t[17]=e("h3",{class:"text-xl font-semibold mb-4 text-green-800"},"Documentos del Estudiante",-1)),e("ul",ne,[e("li",null,[t[14]||(t[14]=r(" Carnet de Identidad: ")),e("span",ie,l(a.value.ci||"---"),1),e("span",{class:D(["ml-2",a.value.ci?"text-green-600":"text-red-600"])},l(a.value.ci?"✓ Presentado":"✗ No presentado"),3)]),e("li",null,[t[15]||(t[15]=r(" Certificado de Nacimiento: ")),e("span",ue,l(a.value.cert_nac||"---"),1),e("span",{class:D(["ml-2",a.value.cert_nac?"text-green-600":"text-red-600"])},l(a.value.cert_nac?"✓ Presentado":"✗ No presentado"),3)]),e("li",null,[t[16]||(t[16]=r(" Libreta Anterior: ")),e("span",de,l(a.value.libreta||"---"),1),e("span",{class:D(["ml-2",a.value.libreta?"text-green-600":"text-red-600"])},l(a.value.libreta?"✓ Presentado":"✗ No presentado"),3)])])])])):b("",!0),p.value&&v.value.length?(n(),i("div",ce,[e("div",ve,[e("div",pe,[e("h3",me,"Horario de "+l(h.value.nombre_completo),1),f(y,{label:"Cerrar",color:"warning",onClick:L})]),e("div",ge,[e("table",be,[e("thead",_e,[e("tr",null,[t[18]||(t[18]=e("th",{class:"px-4 py-2 border"},"Hora",-1)),(n(),i(_,null,x($,o=>e("th",{key:o,class:"px-4 py-2 border"},l(o),1)),64))])]),e("tbody",null,[(n(!0),i(_,null,x(A.value,(o,c)=>(n(),i("tr",{key:c,class:"hover:bg-blue-50"},[e("td",xe,l(o.hora_inicio)+" - "+l(o.hora_fin),1),(n(),i(_,null,x($,d=>e("td",{key:d,class:"px-4 py-2 border text-center"},[o.dia===d&&o.materia?(n(),i("span",fe,[e("strong",null,l(o.materia.sigla_materia),1),t[19]||(t[19]=e("br",null,null,-1)),r(" "+l(o.materia.area_materia),1)])):b("",!0)])),64))]))),128))])])])])])):b("",!0)])]),_:1}))}};export{he as default};
